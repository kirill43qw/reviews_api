# Reviews API

## Описание

Проект **Reviews API** предоставляет платформу для сбора отзывов пользователей на произведения, такие как книги, фильмы и музыку. Произведения классифицируются по категориям и жанрам, а пользователи могут оставлять отзывы, комментарии, ставить оценки и редактировать свои данные.

---

## Архитектура

### DDD (Domain-Driven Design)
Проект реализует архитектурный подход DDD, что включает:

- **Entities:** централизованные модели, содержащие бизнес-логику.
- **Services:** интерфейсы для взаимодействия с сущностями.
- **Use Cases:** обработчики операций, обеспечивающие взаимодействие между слоями.
- **Dependency Injection:** реализован через `punq`.

---

## Технологии проекта

- Python 3.11
- Django
- Django-ninja
- PostgreSQL
- Redis
- Elasticsearch
- Docker, Docker Compose
- Nginx

---

## Requirements

- [Docker](https://www.docker.com/get-started)
- [Docker Compose](https://docs.docker.com/compose/install/)
- [GNU Make](https://www.gnu.org/software/make/)

---

## Установка и запуск
* `git clone 'https://github.com/kirill43qw/reviews_api'`
* `cd reviews_api`
* `make app` - сборка приложения
* `make migrations` - создание файлов миграции
* `make migrate` - выполнение миграций
* `make sync` -  создание индекса в Elasticsearch

---

* Документация проекта доступна по адресу (http://localhost:8000/api/docs)

---
## Алгоритм регистрации пользователей

1. **Запрос на `/api/v1/auth/`:**
   Пользователь отправляет запрос с параметрами `phone` и `number`.
   
2. **Получение кода подтверждения:**
   Пользователь получвет код подтверждения.

3. **Подтверждение регистрации:**
   Пользователь отправляет код вместе с номером телефона на `api/v1/confirm/` и получает `token`.

4. **Редактирование профиля:**
   Пользователь может отправить `PATCH`-запрос на `/users/me/` для заполнения профиля. Все поля описаны в документации.

---

## Пользовательские роли

- **Аноним**:
  - Просмотр описаний произведений.
  - Чтение отзывов и комментариев.

- **Аутентифицированный пользователь**:
  - Все права анонима.
  - Создание отзывов, оценок, комментариев.
  - Редактирование и удаление своих отзывов и комментариев.

- **Модератор**:
  - Все права аутентифицированного пользователя.
  - Удаление любых отзывов и комментариев.

- **Администратор**:
  - Полный контроль над проектом.
  - Управление пользователями, категориями, произведениями, жанрами.

- **Django-администратор**:
  - Все права администратора плюс доступ к панели Django.

---



